# Use Cases

## Overview

- This section contains the application's **workflows** (positive, negative and edge scenarios) for the Sign in, Login and Transactions features.

### Sign In feature

Tigger (Frontend):
 
- The user clicks the "Sign In" button on the registration form after filling all required fields.
 
Tigger (Backend):
 
- A POST request is sent to the user registration endpoint with valid and/or invalid data.
 
### Positive Scenarios
 
#### UC-001: Successful user registration (Frontend)

**Description:**

Allows a new user to sign up filling all the form fields through the SignUp form.
 
**Preconditions:**

- None
 
**Steps:**

1. Enter a name, lastname, email and password.
2. Click the Signup button
 
**Expected result:**

- The user signs in successfully.
 
#### UC-002: Successful user registration via API (Backend)

**Description:**

Allows a new user to sign in successfully though the backend API.

**Preconditions:**

- The email used for registration does not already exist in the system.

**Steps:**

1. The client sends a POST request to /api/register including firstName, lastName, email and password.
2. The backend validates the input data and creates a new user record.
3. The backend generates an authentication token and returns it along with created user object.

**Expected result:**

- The API returns a successful response with user data and valid authentication token.
 
### Negative Scenarios
 
#### UC-003: Email already exists (Frontend)
 
**Description:**

Ensures the system prevents sign in when duplicate emails are provided.
 
**Preconditions:**

- A user with the given email adress already exists in the system.
 
**Steps:**

1. Enter a name, lastname and password.
2. Enter an email adress that already exists in the system.
3. Click the Signup button
 
**Expected result:**

- An error message displays indicating the email already exists.
- The user remains on the sign in screen.


#### UC-004: Email already exists in the API (Backend)
 
**Description:**

Ensures the system prevents sign in from the API when duplicate emails are provided.
 
**Preconditions:**

- A user with the given email adress already exists in the system.
 
**Steps:**

1. The client sends a POST request to **/api/auth/signup** with firstName, lastName, email and password.
2. The backend validates the data and detects that the email is already in use.
3. The backend returns an error response indicating the conflict.
 
**Expected result:**

- The API returns an error message and prevents duplicate user creation.

### UC-005: Successful user sign-up and valid API response

**Description:**

Validate that a new user can successfully sign up and that the frontend correctly receives and handles the API response containing status code 201, a token, and user data.

**Preconditions:**

- User is on the registration page.

- User data (first name, last name, base email, password) is available in TestData.

- User does not already exist in the system.

**Steps:**

1. Generate a unique email for registration.

2. Fill out the signup form with valid user information.

3. Intercept the signup API call (/api/auth/signup).

4. Click the Sign Up button.

5. Wait for the API response.

6. Capture the response status and body.

7. Validate that the response contains a token and correct user details.

8. Verify that the UI displays the message "Registro exitoso!".

**Expected Result:**

- API returns 201 Created.

- Response body contains a token (string) and a user object with correct first name, last name, email, and an autogenerated ID.

- UI displays "Registro exitoso!".

#### UC-006: Sign-up attempt with an email that already exists

**Description:**

Validate that the system properly handles a case where the submitted email already exists, returning a 409 Conflict error and displaying an appropriate UI message.

**Preconditions:**

- User is on the registration page.

- API endpoint /api/auth/signup is intercepted to simulate the conflict.

**Steps:**

1. Generate a unique email string.

2. Mock the API to return a 409 error with message "Email already in use".

3. Fill out the registration form with user data.

4. Submit the form.

5. Verify the UI shows the error message.

**Expected Result:**

- API returns 409 Conflict with message "Email already in use".

- Frontend displays error text starting with "Email already in u" (or full message depending on UI).

#### UC-007: Create user via direct API sign-up request

**Description:**

Verify that the API endpoint /api/auth/signup correctly processes a direct POST request made outside the UI.

**Preconditions:**

- API endpoint is reachable at http://localhost:6007/api/auth/signup.

- Test data with valid user information is available.

**Steps:**

1. Generate a unique email.

2. Send a POST request to the signup API endpoint with valid JSON payload:

- firstName

- lastName

- email

- password

3. Capture the API response.

**Expected Result:**

- API processes the request successfully (typically returning 201 + token + user data).

- Response is returned without errors. (Note: The test does not assert the result.)

#### UC-008: Simulate server error during sign-up

**Description:**

- Validate that the frontend handles server failures correctly when the API responds with a 500 Internal Server Error during sign-up.

**Preconditions:**

- User is on the registration page.

- /api/auth/signup endpoint is intercepted to return a 500 error.

**Steps:**

1. Generate a unique email.

2. Intercept the signup request and mock a 500 Internal Server Error response.

3. Fill out the signup form with valid data.

4. Click the Sign Up button and wait for the intercepted API response.

5. Validate the API response code.

6. Check that the UI does not show the success message.

**Expected Result:**

- API returns 500 Internal Server Error.

- The frontend does not display the success message.

- Error handling behavior is triggered (e.g., staying on the same page or showing an error).


--------